---
id: TODO-CRUD-001-ACCEPTANCE
title: 할 일 CRUD 기능 인수 기준
version: 0.0.1
status: draft
priority: high
author: @spec-builder
created: 2025-10-30
---

# 할 일 CRUD 기능 인수 기준 (Acceptance Criteria)

> **SPEC 참조**: `@SPEC:TODO-CRUD-001`
> **목적**: Given-When-Then 형식으로 검증 가능한 인수 조건 정의

---

## 인수 기준 개요

### 검증 범위
- 할 일 CRUD API (백엔드)
- 할 일 CRUD UI (프론트엔드)
- 에러 처리 및 예외 상황
- 비기능 요구사항 (성능, 보안, 접근성)

### 검증 방법
- **단위 테스트**: Service 로직 검증
- **통합 테스트**: API 엔드포인트 검증
- **컴포넌트 테스트**: UI 동작 검증
- **E2E 테스트**: 전체 사용자 흐름 검증

---

## AC1: 할 일 생성 성공 (Happy Path)

### 시나리오 1.1: 모든 필드를 입력하여 할 일 생성

**Given**:
- 사용자가 할 일 입력 폼에 접근한 상태
- 시스템이 정상 작동 중

**When**:
- 사용자가 다음 데이터를 입력한다:
  - 제목: "장보기"
  - 설명: "우유, 빵, 계란 구매"
  - 우선순위: "high"
- "추가" 버튼을 클릭한다

**Then**:
- ✅ 할 일이 목록 상단에 추가된다
- ✅ 새로운 할 일은 고유 ID를 가진다
- ✅ `createdAt` 필드가 현재 시각으로 설정된다
- ✅ `updatedAt` 필드가 `createdAt`과 동일하다
- ✅ 성공 메시지 "할 일이 추가되었습니다."가 표시된다
- ✅ 입력 폼이 초기화된다 (빈 값으로 리셋)

**API 응답 검증**:
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "title": "장보기",
  "description": "우유, 빵, 계란 구매",
  "priority": "high",
  "createdAt": "2025-10-30T10:30:00Z",
  "updatedAt": "2025-10-30T10:30:00Z"
}
```

### 시나리오 1.2: 최소 필드만 입력하여 할 일 생성

**Given**:
- 사용자가 할 일 입력 폼에 접근한 상태

**When**:
- 사용자가 제목만 입력한다:
  - 제목: "운동하기"
  - 설명: (비어있음)
  - 우선순위: (기본값 "medium")
- "추가" 버튼을 클릭한다

**Then**:
- ✅ 할 일이 생성된다
- ✅ `description` 필드는 빈 문자열 또는 null이다
- ✅ `priority` 필드는 기본값 "medium"이다
- ✅ 목록에 정상적으로 표시된다

---

## AC2: 할 일 생성 실패 (Error Cases)

### 시나리오 2.1: 빈 제목으로 생성 시도

**Given**:
- 사용자가 할 일 입력 폼에 접근한 상태

**When**:
- 사용자가 제목을 입력하지 않고 "추가" 버튼을 클릭한다
  - 제목: ""
  - 설명: "설명 입력됨"

**Then**:
- ❌ 할 일이 생성되지 않는다
- ✅ HTTP 400 Bad Request 응답을 받는다
- ✅ "제목을 입력해주세요." 오류 메시지가 표시된다
- ✅ 입력 폼은 유지된다 (사용자가 수정 가능)
- ✅ 제목 입력 필드에 시각적 에러 표시 (빨간 테두리 등)

**API 응답 검증**:
```json
{
  "error": "제목을 입력해주세요.",
  "code": "TITLE_REQUIRED",
  "field": "title"
}
```

### 시나리오 2.2: 제목이 200자를 초과하는 경우

**Given**:
- 사용자가 할 일 입력 폼에 접근한 상태

**When**:
- 사용자가 201자 길이의 제목을 입력한다
- "추가" 버튼을 클릭한다

**Then**:
- ❌ 할 일이 생성되지 않는다
- ✅ HTTP 400 Bad Request 응답을 받는다
- ✅ "제목은 200자 이내로 입력해주세요." 오류 메시지가 표시된다
- ✅ 현재 입력 길이가 표시된다 (예: "201/200")

### 시나리오 2.3: 유효하지 않은 우선순위 값

**Given**:
- 사용자가 API를 직접 호출하는 상황 (또는 UI 조작)

**When**:
- 다음 데이터로 POST 요청을 보낸다:
  ```json
  {
    "title": "테스트",
    "priority": "invalid-priority"
  }
  ```

**Then**:
- ❌ 할 일이 생성되지 않는다
- ✅ HTTP 400 Bad Request 응답을 받는다
- ✅ "우선순위는 low, medium, high 중 하나여야 합니다." 메시지 표시

---

## AC3: 할 일 목록 조회

### 시나리오 3.1: 여러 할 일이 있는 경우

**Given**:
- 시스템에 5개의 할 일이 저장되어 있다:
  1. "장보기" (high)
  2. "운동하기" (medium)
  3. "청소하기" (low)
  4. "독서하기" (high)
  5. "전화하기" (medium)

**When**:
- 사용자가 할 일 목록 페이지를 방문한다 (GET /api/todos)

**Then**:
- ✅ 5개의 할 일 카드가 화면에 표시된다
- ✅ 각 카드는 다음 정보를 포함한다:
  - 제목
  - 우선순위 뱃지 (색상으로 구분)
  - 수정 버튼
  - 삭제 버튼
- ✅ 로딩 시간은 1초 이내이다
- ✅ API 응답에 `total: 5`가 포함된다

**API 응답 검증**:
```json
{
  "todos": [
    { "id": "...", "title": "장보기", "priority": "high", ... },
    { "id": "...", "title": "운동하기", "priority": "medium", ... },
    ...
  ],
  "total": 5
}
```

### 시나리오 3.2: 빈 목록 조회

**Given**:
- 시스템에 할 일이 하나도 없다

**When**:
- 사용자가 할 일 목록 페이지를 방문한다

**Then**:
- ✅ "할 일이 없습니다. 새로운 할 일을 추가해보세요." 메시지가 표시된다
- ✅ 빈 상태 일러스트레이션이 표시된다 (선택 사항)
- ✅ 할 일 추가 폼이 활성화되어 있다
- ✅ API 응답: `{ "todos": [], "total": 0 }`

### 시나리오 3.3: 개별 할 일 상세 조회

**Given**:
- ID가 "abc-123"인 할 일이 존재한다

**When**:
- 사용자가 해당 할 일의 상세 페이지를 방문한다 (GET /api/todos/abc-123)

**Then**:
- ✅ HTTP 200 OK 응답을 받는다
- ✅ 할 일의 모든 정보가 표시된다:
  - 제목
  - 설명 (있는 경우)
  - 우선순위
  - 생성 시각
  - 마지막 수정 시각
- ✅ 수정/삭제 버튼이 표시된다

### 시나리오 3.4: 존재하지 않는 할 일 조회

**Given**:
- ID가 "non-existent-id"인 할 일이 존재하지 않는다

**When**:
- 사용자가 GET /api/todos/non-existent-id를 요청한다

**Then**:
- ❌ 할 일이 조회되지 않는다
- ✅ HTTP 404 Not Found 응답을 받는다
- ✅ "할 일을 찾을 수 없습니다." 메시지가 표시된다

**API 응답 검증**:
```json
{
  "error": "할 일을 찾을 수 없습니다.",
  "code": "TODO_NOT_FOUND"
}
```

---

## AC4: 할 일 수정

### 시나리오 4.1: 할 일 제목 수정 성공

**Given**:
- ID가 "abc-123"인 할 일이 존재한다:
  ```json
  {
    "id": "abc-123",
    "title": "장보기",
    "description": "우유, 빵",
    "priority": "high",
    "createdAt": "2025-10-30T10:00:00Z",
    "updatedAt": "2025-10-30T10:00:00Z"
  }
  ```

**When**:
- 사용자가 수정 버튼을 클릭한다
- 제목을 "장보기 완료"로 변경한다
- 저장 버튼을 클릭한다

**Then**:
- ✅ HTTP 200 OK 응답을 받는다
- ✅ 할 일 목록에서 제목이 즉시 갱신된다
- ✅ `updatedAt` 필드가 현재 시각으로 변경된다
- ✅ `createdAt` 필드는 변경되지 않는다
- ✅ "할 일이 수정되었습니다." 메시지가 표시된다

**API 응답 검증**:
```json
{
  "id": "abc-123",
  "title": "장보기 완료",
  "description": "우유, 빵",
  "priority": "high",
  "createdAt": "2025-10-30T10:00:00Z",
  "updatedAt": "2025-10-30T11:00:00Z"  // 갱신됨
}
```

### 시나리오 4.2: 우선순위 변경

**Given**:
- 할 일 "운동하기"의 우선순위가 "medium"이다

**When**:
- 사용자가 우선순위를 "high"로 변경한다
- 저장 버튼을 클릭한다

**Then**:
- ✅ 우선순위가 "high"로 변경된다
- ✅ 우선순위 뱃지 색상이 변경된다 (예: 노란색 → 빨간색)
- ✅ `updatedAt` 필드가 갱신된다

### 시나리오 4.3: 수정 시 빈 제목 입력 실패

**Given**:
- ID가 "abc-123"인 할 일이 존재한다

**When**:
- 사용자가 제목을 빈 값으로 변경하고 저장하려고 시도한다

**Then**:
- ❌ 수정이 적용되지 않는다
- ✅ HTTP 400 Bad Request 응답을 받는다
- ✅ "제목을 입력해주세요." 오류 메시지가 표시된다
- ✅ 기존 값이 유지된다

### 시나리오 4.4: 존재하지 않는 할 일 수정 시도

**Given**:
- ID가 "non-existent-id"인 할 일이 존재하지 않는다

**When**:
- 사용자가 PUT /api/todos/non-existent-id 요청을 보낸다

**Then**:
- ❌ 수정이 적용되지 않는다
- ✅ HTTP 404 Not Found 응답을 받는다
- ✅ "할 일을 찾을 수 없습니다." 메시지가 표시된다

---

## AC5: 할 일 삭제

### 시나리오 5.1: 할 일 삭제 성공

**Given**:
- ID가 "abc-123"인 할 일이 존재한다
- 할 일 목록에 총 3개의 항목이 있다

**When**:
- 사용자가 삭제 버튼을 클릭한다
- 확인 다이얼로그에서 "삭제"를 선택한다

**Then**:
- ✅ HTTP 204 No Content 응답을 받는다
- ✅ 해당 할 일이 목록에서 즉시 제거된다
- ✅ 목록의 총 개수가 2개로 감소한다
- ✅ "할 일이 삭제되었습니다." 메시지가 표시된다
- ✅ 삭제된 할 일은 GET /api/todos/:id로 조회되지 않는다 (404)

**API 응답 검증**:
- Status Code: 204 No Content
- Response Body: 없음

### 시나리오 5.2: 삭제 확인 다이얼로그에서 취소

**Given**:
- 사용자가 삭제 버튼을 클릭한 상태

**When**:
- 확인 다이얼로그에서 "취소"를 선택한다

**Then**:
- ❌ 할 일이 삭제되지 않는다
- ✅ 다이얼로그가 닫힌다
- ✅ 목록이 그대로 유지된다

### 시나리오 5.3: 존재하지 않는 할 일 삭제 시도

**Given**:
- ID가 "non-existent-id"인 할 일이 존재하지 않는다

**When**:
- 사용자가 DELETE /api/todos/non-existent-id 요청을 보낸다

**Then**:
- ❌ 삭제가 수행되지 않는다
- ✅ HTTP 404 Not Found 응답을 받는다
- ✅ "할 일을 찾을 수 없습니다." 메시지가 표시된다

### 시나리오 5.4: 마지막 할 일 삭제 후 빈 상태 표시

**Given**:
- 시스템에 할 일이 1개만 존재한다

**When**:
- 사용자가 해당 할 일을 삭제한다

**Then**:
- ✅ 할 일이 삭제된다
- ✅ "할 일이 없습니다. 새로운 할 일을 추가해보세요." 메시지가 표시된다
- ✅ 빈 상태 UI로 전환된다

---

## AC6: 에러 처리 및 예외 상황

### 시나리오 6.1: 네트워크 오류

**Given**:
- 사용자가 할 일 목록 페이지에 있다

**When**:
- 네트워크 연결이 끊긴 상태에서 할 일을 생성하려고 시도한다

**Then**:
- ❌ 할 일이 생성되지 않는다
- ✅ "네트워크 오류가 발생했습니다. 다시 시도해주세요." 메시지가 표시된다
- ✅ 재시도 버튼이 제공된다
- ✅ 입력한 데이터는 유지된다 (사용자가 다시 입력할 필요 없음)

### 시나리오 6.2: 서버 오류 (500)

**Given**:
- 사용자가 할 일 목록을 조회하려고 한다

**When**:
- 서버가 500 Internal Server Error를 반환한다

**Then**:
- ✅ "일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요." 메시지가 표시된다
- ✅ 에러 로그가 기록된다 (개발자용)
- ✅ 사용자에게 기술적 세부 정보가 노출되지 않는다

### 시나리오 6.3: 타임아웃

**Given**:
- 사용자가 할 일을 생성하려고 한다

**When**:
- API 요청이 10초 내에 응답하지 않는다

**Then**:
- ✅ 요청이 자동으로 취소된다
- ✅ "요청 시간이 초과되었습니다. 다시 시도해주세요." 메시지가 표시된다
- ✅ 로딩 인디케이터가 사라진다

---

## AC7: 비기능 요구사항

### 시나리오 7.1: 성능 - API 응답 시간

**Given**:
- 시스템에 100개의 할 일이 저장되어 있다

**When**:
- 사용자가 할 일 목록을 조회한다 (GET /api/todos)

**Then**:
- ✅ API 응답 시간은 평균 200ms 이하이다
- ✅ 95th percentile 응답 시간은 500ms 이하이다

**측정 방법**:
- Apache Bench 또는 k6를 사용한 부하 테스트
- 100회 요청 후 평균/최대/95th percentile 측정

### 시나리오 7.2: 성능 - UI 렌더링 시간

**Given**:
- 할 일 목록에 50개의 항목이 있다

**When**:
- 사용자가 목록 페이지를 방문한다

**Then**:
- ✅ 첫 번째 콘텐츠 표시 시간 (FCP): 1초 이내
- ✅ 상호작용 가능 시간 (TTI): 2초 이내

**측정 방법**:
- Lighthouse 또는 WebPageTest 사용

### 시나리오 7.3: 접근성 - 키보드 네비게이션

**Given**:
- 사용자가 마우스를 사용하지 않고 키보드만 사용한다

**When**:
- Tab 키로 할 일 목록을 탐색한다

**Then**:
- ✅ 모든 상호작용 요소(버튼, 입력 필드)가 Tab 키로 접근 가능하다
- ✅ 포커스 순서가 논리적이다 (위→아래, 좌→우)
- ✅ 포커스 상태가 시각적으로 명확하다 (파란 테두리 등)
- ✅ Enter 키로 버튼 클릭 가능
- ✅ Esc 키로 다이얼로그 닫기 가능

### 시나리오 7.4: 접근성 - 스크린 리더 지원

**Given**:
- 사용자가 스크린 리더(NVDA, JAWS)를 사용한다

**When**:
- 할 일 목록 페이지를 탐색한다

**Then**:
- ✅ 모든 버튼에 적절한 aria-label이 있다 (예: "장보기 할 일 삭제")
- ✅ 폼 필드에 label이 연결되어 있다
- ✅ 에러 메시지가 스크린 리더에 즉시 전달된다 (aria-live)
- ✅ 빈 목록 상태 메시지가 읽힌다

**측정 방법**:
- axe DevTools 또는 Lighthouse 접근성 스캔
- WCAG 2.1 Level AA 기준 준수

### 시나리오 7.5: 보안 - SQL Injection 방지

**Given**:
- 악의적인 사용자가 SQL Injection 공격을 시도한다

**When**:
- 제목 필드에 다음 값을 입력한다:
  ```
  "'; DROP TABLE todos; --"
  ```

**Then**:
- ✅ 할 일이 정상적으로 생성된다 (문자열로 처리)
- ❌ 데이터베이스 테이블이 삭제되지 않는다
- ✅ 입력 값이 이스케이프 처리된다

**측정 방법**:
- OWASP ZAP 또는 Burp Suite를 사용한 보안 스캔

### 시나리오 7.6: 보안 - XSS(Cross-Site Scripting) 방지

**Given**:
- 악의적인 사용자가 XSS 공격을 시도한다

**When**:
- 제목 필드에 다음 값을 입력한다:
  ```html
  <script>alert('XSS')</script>
  ```

**Then**:
- ✅ 할 일이 생성된다
- ❌ 스크립트가 실행되지 않는다
- ✅ 화면에 `<script>alert('XSS')</script>`가 텍스트로 표시된다 (HTML 이스케이프)

---

## AC8: 사용성 및 UX

### 시나리오 8.1: 로딩 상태 표시

**Given**:
- 사용자가 할 일 목록을 조회하려고 한다

**When**:
- API 요청이 진행 중이다 (응답 대기)

**Then**:
- ✅ 스피너 또는 스켈레톤 UI가 표시된다
- ✅ "로딩 중..." 텍스트가 표시된다 (스크린 리더용)
- ✅ 사용자 입력이 비활성화된다 (중복 요청 방지)

### 시나리오 8.2: 성공 피드백

**Given**:
- 사용자가 할 일을 생성/수정/삭제했다

**When**:
- 작업이 성공적으로 완료된다

**Then**:
- ✅ 토스트 메시지가 화면 상단에 표시된다
- ✅ 메시지는 3초 후 자동으로 사라진다
- ✅ 메시지 색상: 성공(초록), 오류(빨강), 경고(노랑)

### 시나리오 8.3: 반응형 디자인

**Given**:
- 사용자가 모바일 기기(375px 폭)를 사용한다

**When**:
- 할 일 목록 페이지를 방문한다

**Then**:
- ✅ 할 일 카드가 세로로 쌓인다 (단일 컬럼)
- ✅ 버튼이 터치하기 적절한 크기이다 (최소 44x44px)
- ✅ 텍스트가 가독성 있게 표시된다 (최소 16px)
- ✅ 가로 스크롤이 발생하지 않는다

---

## 품질 게이트 (Quality Gate)

### 통과 기준

#### 테스트 커버리지
- ✅ 단위 테스트 커버리지: ≥90%
- ✅ 통합 테스트 커버리지: 모든 API 엔드포인트 100%
- ✅ E2E 테스트: 주요 사용자 플로우 100%

#### 성능
- ✅ API 응답 시간 평균: ≤200ms
- ✅ UI 렌더링 시간: ≤1초
- ✅ Lighthouse 성능 점수: ≥90점

#### 접근성
- ✅ axe DevTools 오류: 0건
- ✅ Lighthouse 접근성 점수: ≥90점
- ✅ WCAG 2.1 Level AA 준수: 100%

#### 보안
- ✅ OWASP ZAP 스캔: 심각한 취약점 0건
- ✅ SQL Injection 테스트: 통과
- ✅ XSS 테스트: 통과

#### 코드 품질
- ✅ ESLint 오류: 0건
- ✅ TypeScript 타입 오류: 0건
- ✅ 코드 리뷰 승인: 1명 이상

---

## 테스트 실행 계획

### 단계 1: 단위 테스트
```bash
npm run test:unit
# 예상 결과: 모든 테스트 통과, 커버리지 ≥90%
```

### 단계 2: 통합 테스트
```bash
npm run test:integration
# 예상 결과: 모든 API 엔드포인트 테스트 통과
```

### 단계 3: 컴포넌트 테스트
```bash
npm run test:component
# 예상 결과: 모든 UI 컴포넌트 테스트 통과
```

### 단계 4: E2E 테스트
```bash
npm run test:e2e
# 예상 결과: 주요 사용자 플로우 테스트 통과
```

### 단계 5: 성능 테스트
```bash
npm run test:performance
# 예상 결과: API 응답 시간 목표 달성
```

### 단계 6: 접근성 테스트
```bash
npm run test:a11y
# 예상 결과: WCAG 2.1 Level AA 준수
```

### 단계 7: 보안 테스트
```bash
npm run test:security
# 예상 결과: 심각한 취약점 0건
```

---

## Definition of Done (DoD)

할 일 CRUD 기능이 완료되었다고 간주하려면 다음 조건을 모두 만족해야 합니다:

### 기능 완성도
- ✅ 모든 CRUD 작업이 UI와 API 양쪽에서 작동한다
- ✅ 모든 AC1~AC8 시나리오가 검증되었다
- ✅ 에러 처리가 모든 예외 상황에서 올바르게 작동한다

### 테스트
- ✅ 모든 자동화 테스트가 통과한다
- ✅ 테스트 커버리지가 목표를 달성한다
- ✅ E2E 테스트가 주요 플로우를 커버한다

### 품질
- ✅ 코드 리뷰가 완료되었다
- ✅ 정적 분석 도구(ESLint, TypeScript)가 통과한다
- ✅ 성능 목표를 달성한다

### 문서
- ✅ API 명세서가 업데이트되었다
- ✅ 사용자 문서가 작성되었다
- ✅ @TAG 체인이 완전하다 (SPEC→TEST→CODE→DOC)

### 배포 준비
- ✅ 개발 환경에서 동작 확인
- ✅ 스테이징 환경에서 동작 확인
- ✅ 프로덕션 배포 체크리스트 완료

---

## 다음 단계

1. **테스트 작성 시작**: `/alfred:2-run SPEC-TODO-CRUD-001` 실행
2. **RED-GREEN-REFACTOR 사이클**: 각 AC를 하나씩 TDD로 구현
3. **품질 게이트 검증**: 모든 테스트 및 품질 기준 확인
4. **문서 동기화**: `/alfred:3-sync` 실행

---

**문서 상태**: 초안 (Draft)
**관련 문서**:
- `@SPEC:TODO-CRUD-001` (spec.md)
- `@SPEC:TODO-CRUD-001:PLAN` (plan.md)
